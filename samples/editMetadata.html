<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link href="style.css" rel="stylesheet"/>
    <script src="../release/all.js"></script>
    <script>
      require(['store/samples/config', 'store/EntryStore'], function(config, EntryStore) {
        var es = new EntryStore(config.repository);
        es.getAuth().login(config.username, config.password).then(function() {
          var entryURI = es.getEntryURI(config.contextId, config.entryId);
          es.getEntry(entryURI).then(function(entry) {
            var md = entry.getMetadata();
            var stmts = md.findAndRemove(null, "dcterms:title");
            md.addL(entry.getResourceURI(), "dcterms:title", "New title at " + new Date(), "en");
            entry.commitMetadata().then(function() {
              alert("Success: changed metadata");
            }, function(err) {
              alert("Failure saving metadata: " + err);
            });
          }, function(err) {
            alert("Failed loading entry: " + err);
          });
        });
      });
    </script>
</head>
<body>
</html>