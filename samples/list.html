<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script src="../libs/requirejs/require.js"></script>
    <link href="style.css" rel="stylesheet"/>
</head>
<body>
<script type="text/javascript">
    require(["./config"], function(config) {
        require(['store/EntryStore',
            'dojo/dom-construct',
            'dojo/_base/array',
            'store/html',
            'dojo/domReady!'             //Wait until the dom is ready.
        ], function(EntryStore, construct, array, html) {
            var es = new EntryStore();
            es.getEntry(es.getEntryURI("1", "_top")).then(function(entry) {
                var list = entry.getResource(true);
                list.getEntries().then(function(children) {
                    construct.create("h3", {"innerHTML": "List loaded with " + children.length + " children."}, "_contentNode");
                    array.forEach(children, function(child) {
                        construct.place(html.print(child), "_contentNode");
                    });
                }, function(err) {
                    alert("Failed loading children of list-entry.");
                });
            }, function(err) {
                alert("Failure to load list-entry: " + err);
            });
        });
    });
  </script>
  <div id="_contentNode"></div>
  </body>
</html>